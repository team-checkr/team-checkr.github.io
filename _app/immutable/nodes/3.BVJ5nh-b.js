const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/M_tODZEt.js","../chunks/DavXbj_w.js","../chunks/DGgHjv66.js","../chunks/D6-XlEtG.js"])))=>i.map(i=>d[i]);
import{_ as L}from"../chunks/DavXbj_w.js";import{n as Z,a as h,t as A,c as q}from"../chunks/CQGBydWg.js";import{D as H,a3 as W,a4 as X,T as G,a1 as rr,a5 as v,a6 as S,a as $,u as er,Q as N,a7 as tr,a2 as ar,g as e,a8 as l,b as sr,$ as nr,R as C,S as k,P as E,a9 as j}from"../chunks/DGgHjv66.js";import{h as or,s as ir}from"../chunks/W2uRDdWD.js";import{i as F}from"../chunks/CrP6Mcqk.js";import{a as fr,b as lr}from"../chunks/BmyH6ysu.js";import{E as cr}from"../chunks/CyO7aZKp.js";import{N as pr}from"../chunks/DKg0ri7i.js";import{r as ur}from"../chunks/CxD82Lhf.js";const dr=[];function mr(r,s=!1){return I(r,new Map,"",dr)}function I(r,s,d,f,n=null){if(typeof r=="object"&&r!==null){var m=s.get(r);if(m!==void 0)return m;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(H(r)){var a=Array(r.length);s.set(r,a),n!==null&&s.set(n,a);for(var o=0;o<r.length;o+=1){var u=r[o];o in r&&(a[o]=I(u,s,d,f))}return a}if(W(r)===X){a={},s.set(r,a),n!==null&&s.set(n,a);for(var _ in r)a[_]=I(r[_],s,d,f);return a}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function")return I(r.toJSON(),s,d,f,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}var _r=Z('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12.75L11.25 15L15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.75 3.75 0 0 1-1.043 3.296a3.75 3.75 0 0 1-3.296 1.043A3.75 3.75 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.75 3.75 0 0 1-3.296-1.043a3.75 3.75 0 0 1-1.043-3.296A3.75 3.75 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.75 3.75 0 0 1 1.043-3.296a3.75 3.75 0 0 1 3.296-1.043A3.75 3.75 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.75 3.75 0 0 1 3.296 1.043a3.75 3.75 0 0 1 1.043 3.296A3.75 3.75 0 0 1 21 12"></path></svg>');function gr(r,s){const d=ur(s,["$$slots","$$events","$$legacy"]);var f=_r();let n;G(()=>n=fr(f,n,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...d})),h(r,f)}var vr=A('<meta name="description" content="Chip">'),hr=A("The program is <b>fully annotated</b>",1),br=A("The program is <b><i>not</i> fully annotated</b>",1),yr=A('<!> <div class="relative grid grid-rows-[2fr_auto_auto] overflow-hidden bg-slate-800"><!> <div><span class="font-bold"> </span> <div class="flex-1"></div> <span class="text-xl"><!></span></div></div>',1);function $r(r,s){rr(s,!0);const d=`{ true }
if
  false -> skip
fi
{ true }`,f="chip-program";let n=v(S((typeof localStorage.getItem(f)=="string"?localStorage.getItem(f):null)||d));$(()=>{localStorage.setItem(f,e(n))});let m=v(S({parse_error:!1,prelude:"",assertions:[],markers:[],is_fully_annotated:!1})),a=v(S([])),o=v(!1),u=v("idle"),_=v(null);er(()=>{(async()=>{const{default:c,parse:x}=await L(async()=>{const{default:g,parse:b}=await import("../chunks/SU1yMK8Y.js");return{default:g,parse:b}},[],import.meta.url);await c(),l(_,x,!0)})().catch(console.error)}),$(()=>{if(!e(_))return;l(o,!1);const t=e(_)(e(n));t.parse_error&&l(o,!0),l(m,t,!0)});let y=0;$(()=>{const t=mr(e(m));let c=()=>{};return(async()=>{const g=++y,b=await L(()=>import("../chunks/M_tODZEt.js"),__vite__mapDeps([0,1,2,3]),import.meta.url);l(a,[],!0),l(u,"verifying");let p=!1;for(const i of t.assertions){const{cancel:Q,result:U}=b.run(i.smt,{prelude:t.prelude});c=Q;const w=await U;if(w=="cancelled")return;const Y=w[w.length-1].trim()==="unsat";if(g!==y){console.info("aborted",g,y,t,w);return}Y||(p=!0,l(a,[...sr(()=>e(a)),{severity:"Error",tags:[],message:i.text?i.text:"Verification failed",span:i.span,relatedInformation:[]},...i.related?[{severity:"Info",tags:[],message:i.related[0],span:i.related[1],relatedInformation:[]}]:[]],!0))}p?l(u,"error"):l(u,"verified")})().catch(console.error),()=>{c()}});var M=yr();or(t=>{var c=vr();nr.title="Chip",h(t,c)});var T=N(M);pr(T,{title:"Chip",Icon:gr});var O=C(T,2),V=k(O);const J=tr(()=>[...e(m).markers,...e(a)]);cr(V,{get markers(){return e(J)},get value(){return e(n)},set value(t){l(n,t,!0)}});var R=C(V,2),P=k(R),z=k(P,!0);E(P);var D=C(P,4),B=k(D);{var K=t=>{var c=q(),x=N(c);{var g=p=>{var i=hr();j(),h(p,i)},b=p=>{var i=br();j(),h(p,i)};F(x,p=>{e(m).is_fully_annotated?p(g):p(b,!1)})}h(t,c)};F(B,t=>{!e(o)&&e(u)=="verified"&&t(K)})}E(D),E(R),E(O),G(()=>{lr(R,1,`flex items-center p-2 text-2xl text-white transition duration-500 ${(e(o)?"bg-purple-600":{idle:"bg-gray-500",verifying:"bg-yellow-500",verified:"bg-green-500",error:"bg-red-500"}[e(u)])??""}`),ir(z,e(o)?"Parse error":{idle:"Idle",verifying:"Verifying...",verified:"Verified",error:"Verification error"}[e(u)])}),h(r,M),ar()}export{$r as component};
