const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/Bufj3RrZ.js","../chunks/B748VuJj.js","../chunks/DWhZ5ePM.js","../chunks/D6-XlEtG.js"])))=>i.map(i=>d[i]);
import{_ as A}from"../chunks/B748VuJj.js";import{t as y,a as f,c as Q}from"../chunks/eZCD92nU.js";import"../chunks/DOvFG7qr.js";import{p as S,l as D,a as U,f as L,t as W,b as X,g as i,m as N,u as Y,$ as Z,s as V,c as u,d as ee,e as re,r as v,n as O}from"../chunks/DWhZ5ePM.js";import{s as te}from"../chunks/f4RYbzPN.js";import{i as q}from"../chunks/Cf4HziCT.js";import{h as ae}from"../chunks/CASXjf-D.js";import{s as se}from"../chunks/CidU0e63.js";import{i as ie}from"../chunks/D320q6n4.js";import{s as oe,a as _}from"../chunks/2PDRC3Y9.js";import{w as g}from"../chunks/C80u-4TK.js";import{N as ne,E as le}from"../chunks/SJphvwPt.js";var fe=y('<meta name="description" content="Chip">'),pe=y("The program is <b>fully annotated</b>",1),de=y("The program is <b><i>not</i> fully annotated</b>",1),me=y('<!> <div class="relative grid grid-rows-[2fr_auto_auto] overflow-hidden bg-slate-800"><!> <div><span class="font-bold"> </span> <div class="flex-1"></div> <span class="text-xl"><!></span></div></div>',1);function Ie(z,j){S(j,!1);const[p,B]=oe(),o=()=>_($,"$result",p),F=()=>_(x,"$verifications",p),b=()=>_(w,"$parseError",p),h=()=>_(m,"$state",p);let d=N(`{ true }
if
  false -> skip
fi
{ true }`),$=g({parse_error:!1,prelude:"",assertions:[],markers:[],is_fully_annotated:!1}),x=g([]),w=g(!1),m=g("idle"),c=N(0);D(()=>i(d),()=>{(async()=>{w.set(!1);const{default:a,parse:n}=await A(async()=>{const{default:r,parse:e}=await import("../chunks/SU1yMK8Y.js");return{default:r,parse:e}},[],import.meta.url);await a();const s=n(i(d));s.parse_error&&w.set(!0),$.set(s)})().catch(console.error)}),D(()=>(i(c),o()),()=>{(async()=>{const a=Y(c),n=await A(()=>import("../chunks/Bufj3RrZ.js"),__vite__mapDeps([0,1,2,3]),import.meta.url);x.set([]),m.set("verifying");let s=!1;for(const r of o().assertions){const e=await n.run(r.smt,{prelude:o().prelude}),l=e[e.length-1].trim()==="unsat";if(a!==i(c)){console.log("aborted",a,i(c),$,e);return}l||(s=!0,x.update(M=>[...M,{severity:"Error",tags:[],message:r.text?r.text:"Verification failed",span:r.span,relatedInformation:[]},...r.related?[{severity:"Info",tags:[],message:r.related[0],span:r.related[1],relatedInformation:[]}]:[]]))}s?m.set("error"):m.set("verified")})().catch(console.error)}),U(),ie();var k=me();ae(t=>{var a=fe();Z.title="Chip",f(t,a)});var P=L(k);ne(P,{title:"Chip"});var T=V(P,2),C=u(T);const G=re(()=>[...o().markers,...F()]);le(C,{get markers(){return i(G)},get value(){return i(d)},set value(t){ee(d,t)},$$legacy:!0});var E=V(C,2),I=u(E),H=u(I,!0);v(I);var R=V(I,4),J=u(R);{var K=t=>{var a=Q(),n=L(a);{var s=e=>{var l=pe();O(),f(e,l)},r=e=>{var l=de();O(),f(e,l)};q(n,e=>{o().is_fully_annotated?e(s):e(r,!1)})}f(t,a)};q(J,t=>{!b()&&h()=="verified"&&t(K)})}v(R),v(E),v(T),W(()=>{se(E,1,`flex items-center p-2 text-2xl text-white transition duration-500 ${(b()?"bg-purple-600":{idle:"bg-gray-500",verifying:"bg-yellow-500",verified:"bg-green-500",error:"bg-red-500"}[h()])??""}`),te(H,b()?"Parse error":{idle:"Idle",verifying:"Verifying...",verified:"Verified",error:"Verification error"}[h()])}),f(z,k),X(),B()}export{Ie as component};
